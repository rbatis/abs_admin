(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49ced43a"],{"0401":function(t,e,a){},"0fea":function(t,e,a){"use strict";a.d(e,"g",(function(){return o})),a.d(e,"e",(function(){return s})),a.d(e,"h",(function(){return d})),a.d(e,"f",(function(){return l})),a.d(e,"m",(function(){return r})),a.d(e,"k",(function(){return c})),a.d(e,"i",(function(){return u})),a.d(e,"l",(function(){return _})),a.d(e,"j",(function(){return p})),a.d(e,"p",(function(){return m})),a.d(e,"q",(function(){return h})),a.d(e,"o",(function(){return f})),a.d(e,"r",(function(){return g})),a.d(e,"n",(function(){return b})),a.d(e,"c",(function(){return y})),a.d(e,"a",(function(){return v})),a.d(e,"d",(function(){return D})),a.d(e,"b",(function(){return k}));var n=a("b775"),i={sys_dict_page:"/admin/sys_dict_page",sys_dict_layer_top:"/admin/sys_dict_layer_top",sys_dict_add:"/admin/sys_dict_add",sys_dict_update:"/admin/sys_dict_update",sys_dict_delete:"/admin/sys_dict_remove",sys_permission_page:"/admin/sys_permission_page",sys_permission_add:"/admin/sys_permission_add",sys_permission_update:"/admin/sys_permission_update",sys_permission_delete:"/admin/sys_permission_remove",sys_role_page:"/admin/sys_role_page",sys_role_add:"/admin/sys_role_add",sys_role_update:"/admin/sys_role_update",sys_role_delete:"/admin/sys_role_delete",sys_permission_layer_top:"/admin/sys_permission_layer_top",sys_user_page:"/admin/sys_user_page",sys_user_add:"/admin/sys_user_add",sys_user_update:"/admin/sys_user_update",sys_user_remove:"/admin/sys_user_remove",sys_role_layer_top:"/admin/sys_role_layer_top",user:"/admin/user",role:"/admin/role",service:"/service",permission:"/permission",permissionNoPager:"/permission/no-pager",orgTree:"/org/tree"};function o(t){return Object(n["b"])({url:i.sys_permission_page,method:"post",data:t})}function s(t){return Object(n["b"])({url:i.sys_permission_add,method:"post",data:t})}function d(t){return Object(n["b"])({url:i.sys_permission_update,method:"post",data:t})}function l(t){return Object(n["b"])({url:i.sys_permission_delete,method:"post",data:t})}function r(t){return Object(n["b"])({url:i.sys_permission_layer_top,method:"post",data:t})}function c(t){return Object(n["b"])({url:i.sys_role_page,method:"post",data:t})}function u(t){return Object(n["b"])({url:i.sys_role_add,method:"post",data:t})}function _(t){return Object(n["b"])({url:i.sys_role_update,method:"post",data:t})}function p(t){return Object(n["b"])({url:i.sys_role_delete,method:"post",data:t})}function m(t){return Object(n["b"])({url:i.sys_user_page,method:"post",data:t})}function h(t){return Object(n["b"])({url:i.sys_user_remove,method:"post",data:t})}function f(t){return Object(n["b"])({url:i.sys_user_add,method:"post",data:t})}function g(t){return Object(n["b"])({url:i.sys_user_update,method:"post",data:t})}function b(t){return Object(n["b"])({url:i.sys_role_layer_top,method:"post",data:t})}function y(t){return Object(n["b"])({url:i.sys_dict_page,method:"post",data:t})}function v(t){return Object(n["b"])({url:i.sys_dict_add,method:"post",data:t})}function D(t){return Object(n["b"])({url:i.sys_dict_update,method:"post",data:t})}function k(t){return Object(n["b"])({url:i.sys_dict_delete,method:"post",data:t})}},"69b4":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dataBody"},[a("a-form",{attrs:{layout:"inline"}},[a("a-form-item",[a("a-input",{attrs:{placeholder:"请输入账号",allowClear:!0,maxLength:11},model:{value:t.queryData.account,callback:function(e){t.$set(t.queryData,"account",e)},expression:"queryData.account"}})],1),a("a-form-item",[a("a-input",{attrs:{placeholder:"请输入名称",allowClear:!0},model:{value:t.queryData.name,callback:function(e){t.$set(t.queryData,"name",e)},expression:"queryData.name"}})],1),a("a-form-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[a("a-button",{attrs:{type:"primary","html-type":"submit"},on:{click:t.fetch_no_page}},[t._v(" 查询 ")])],1)],1),a("div",{staticClass:"operate"},[a("a-button",{staticStyle:{width:"100%"},attrs:{type:"dashed",icon:"plus"},on:{click:t.addData}},[t._v("添加")])],1),a("a-table",{attrs:{columns:t.columns,rowKey:function(t){return t.id},dataSource:t.data,pagination:t.pagination,loading:t.loading,indentSize:15,childrenColumnName:"childs"},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"expandedRowRender",fn:function(e){return a("div",{staticStyle:{margin:"0"}},[null!==e&&null!==e.role?a("div",[a("a-tag",{attrs:{color:"blue"}},[t._v("角色名称: "+t._s(e.role.name))]),a("a-tree",{attrs:{"selected-keys":[],"replace-fields":{children:"childs",title:"name",key:"id"},autoExpandParent:!0,"tree-data":[e.role]}})],1):t._e()])}},{key:"state",fn:function(e){return[1===e?a("a-tag",{attrs:{color:"blue"}},[t._v("启用")]):t._e(),0===e?a("a-tag",[t._v("禁用")]):t._e()]}},{key:"action",fn:function(e){return[a("div",{staticStyle:{width:"110px"}},[a("a",{staticStyle:{color:"#f5222d"},on:{click:function(a){return t.handleEnableDisable(e)}}},[t._v(t._s(0===e.state?"启用":"禁用"))]),a("a-dropdown",{staticStyle:{"margin-left":"5px"}},[a("a",{staticClass:"ant-dropdown-link"},[t._v(" 更多 "),a("a-icon",{attrs:{type:"down"}})],1),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",[a("a",{staticStyle:{color:"#1890ff"},on:{click:function(a){return t.handleEdit(e)}}},[t._v("编辑")])]),a("a-menu-item",[a("a",{staticStyle:{color:"#f5222d"},on:{click:function(a){return t.handleDelete(e)}}},[t._v("删除")])])],1)],1)],1)]}}])}),t.visible?a("a-modal",{attrs:{title:"add"===t.dialogMode?"添加":"编辑",cancelText:"取消",okText:"确定",width:500,maskClosable:!1},on:{ok:t.handleAddData},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("a-form",t._b({attrs:{labelAlign:"right"}},"a-form",{labelCol:{sm:{span:4}},wrapperCol:{sm:{span:20}}},!1),[a("a-form-item",{attrs:{label:"姓名"}},[a("a-input",{attrs:{placeholder:"姓名"},model:{value:t.dialogData.name,callback:function(e){t.$set(t.dialogData,"name",e)},expression:"dialogData.name"}})],1),a("a-form-item",{attrs:{label:"手机号"}},[a("a-input",{attrs:{maxLength:11,disabled:"add"!==t.dialogMode,placeholder:"账号/手机号"},model:{value:t.dialogData.account,callback:function(e){t.$set(t.dialogData,"account",e)},expression:"dialogData.account"}})],1),"add"===t.dialogMode||"edit"===t.dialogMode?a("a-form-item",{attrs:{label:"初始密码"}},[a("a-switch",{attrs:{"default-checked":""},model:{value:t.dialogData.set_pwd,callback:function(e){t.$set(t.dialogData,"set_pwd",e)},expression:"dialogData.set_pwd"}}),a("label",[t._v(" 默认密码: 123456")])],1):t._e(),!0===t.dialogData.set_pwd?a("a-form-item",{attrs:{label:"密码"}},[a("a-input-password",{attrs:{placeholder:"密码"},model:{value:t.dialogData.password,callback:function(e){t.$set(t.dialogData,"password",e)},expression:"dialogData.password"}})],1):t._e(),!0===t.dialogData.set_pwd?a("a-form-item",{attrs:{label:"确认密码"}},[a("a-input-password",{attrs:{placeholder:"确认密码"},model:{value:t.dialogData.password_confirm,callback:function(e){t.$set(t.dialogData,"password_confirm",e)},expression:"dialogData.password_confirm"}})],1):t._e(),a("a-form-item",{attrs:{label:"角色集"}},[a("a-tree",{attrs:{"replace-fields":{children:"childs",title:"name",key:"id"},checkable:"","auto-expand-parent":!0,"tree-data":t.all_role,checkStrictly:!0},on:{check:t.onRolesCheck},model:{value:t.dialogData.role_ids,callback:function(e){t.$set(t.dialogData,"role_ids",e)},expression:"dialogData.role_ids"}})],1)],1)],1):t._e()],1)},i=[],o=(a("b0c0"),a("d3b7"),a("5530")),s=a("0fea"),d=a("25a9"),l=[{title:"id",dataIndex:"id"},{title:"名称",dataIndex:"name"},{title:"账号",dataIndex:"account"},{title:"角色名称",dataIndex:"role.name"},{title:"状态",dataIndex:"state",scopedSlots:{customRender:"state"}},{title:"创建时间",dataIndex:"create_date"},{title:"操作",scopedSlots:{customRender:"action"}}],r={mounted:function(){this.fetch(),this.getAllRole()},data:function(){return{data:[],pagination:{},loading:!1,columns:l,queryData:{id:null,account:null,name:null,page_no:1,page_size:5},dialogData:{id:null,role_ids:[],role_id:null,password_confirm:null,set_pwd:!1},visible:!1,dialogMode:"add",all_role:[]}},methods:{handleTableChange:function(t,e,a){var n=Object(o["a"])({},this.pagination);n.current=t.current,n.pageSize=5,this.pagination=n,this.queryData.page_no=t.current,this.fetch()},fetch_no_page:function(){this.pagination.current=1,this.queryData.page_no=1,this.queryData.page_size=5,this.fetch()},fetch:function(){var t=this;this.loading=!0;var e=Object.assign({},this.queryData);null!=e.time_start&&(e.time_start=e.time_start.format("YYYY-MM-DDThh:mm:ss")),null!=e.time_end&&(e.time_end=e.time_end.format("YYYY-MM-DDThh:mm:ss")),""===e.account&&(e.account=null),""===e.name&&(e.name=null),Object(s["p"])(e).then((function(e){var a=Object(o["a"])({},t.pagination);t.loading=!1,t.data=e.data.records,a.total=e.data.total,a.pageSize=e.data.page_size,t.pagination=a}))},addData:function(){this.handleDialogCancel(),this.visible=!0,this.dialogMode="add"},handleAddData:function(){var t=this;this.dialogData.set_pwd&&this.dialogData.password_confirm!==this.dialogData.password?this.$message.info("密码不一致!"):"add"===this.dialogMode?Object(s["o"])(this.dialogData).then((function(e){t.visible=!1,t.fetch()})).catch((function(t){})):"edit"===this.dialogMode&&Object(s["r"])(this.dialogData).then((function(e){t.visible=!1,t.fetch()}))},handleAddChild:function(t){this.visible=!0,this.dialogMode="add",void 0!==t.role&&null!==t.role?this.dialogData=Object.assign({role_ids:[t.role.id],role_id:t.role.id},t):this.dialogData=Object.assign({role_ids:[],role_id:null},t)},handleEdit:function(t){this.visible=!0,this.dialogMode="edit",void 0!==t.role&&null!==t.role?this.dialogData=Object.assign({role_ids:[t.role.id],role_id:t.role.id},t):this.dialogData=Object.assign({role_ids:[],role_id:null},t)},handleDelete:function(t){var e=this;this.$confirm({title:"你确定要删除?",content:"你确定要删除！",onOk:function(){Object(s["q"])(t).then((function(t){Object(d["a"])(e,t),e.visible=!1,e.fetch()}))},onCancel:function(){},class:"test"})},handleEnableDisable:function(t){var e=this;this.$confirm({title:0===t.state?"你确定要启用账号:"+t.name+"?":"你确定要禁用账号:"+t.name+"?",content:0===t.state?"你确定要启用账号:"+t.name+"?":"你确定要禁用账号:"+t.name+"?",onOk:function(){var a=t.state;t.state=0===t.state?1:0,Object(s["r"])(t).then((function(n){"0"===n.code?e.fetch():t.state=a}))},onCancel:function(){},class:"test"})},handleDialogCancel:function(){this.dialogData={id:null,role_ids:[],role_id:null}},getAllRole:function(){var t=this;Object(s["n"])({}).then((function(e){t.all_role=e.data}))},onRolesCheck:function(t){var e=t.checked.length;e>=1?(this.dialogData.role_ids={checked:[t.checked[e-1]],halfChecked:[]},this.dialogData.role_id=t.checked[e-1]):(this.dialogData.role_ids=[],this.dialogData.role_id=null)}}},c=r,u=(a("6df3"),a("2877")),_=Object(u["a"])(c,n,i,!1,null,null,null);e["default"]=_.exports},"6df3":function(t,e,a){"use strict";var n=a("0401"),i=a.n(n);i.a}}]);